"use strict";var WPCharitableAdminNotifications=window.WPCharitableAdminNotifications||function(document,window,$){$("#charitable-notifications").insertAfter($(".wp-header-end"));var el={$notifications:$("#charitable-notifications"),$nextButton:$("#charitable-notifications .navigation .next"),$prevButton:$("#charitable-notifications .navigation .prev"),$adminBarCounter:$("#wp-admin-bar-charitable-menu .charitable-menu-notification-counter"),$adminBarMenuItem:$("#wp-admin-bar-charitable-notifications")};var app={init:function(){$(app.ready)},ready:function(){app.updateNavigation();app.events()},events:function(){el.$notifications.on("click",".dismiss",app.dismiss).on("click",".next",app.navNext).on("click",".prev",app.navPrev)},dismiss:function(event){if(el.$currentMessage.length===0){return}var count=parseInt(el.$adminBarCounter.text(),10);if(count>1){--count;el.$adminBarCounter.html(count)}else{el.$adminBarCounter.remove();el.$adminBarMenuItem.remove()}var $nextMessage=el.$nextMessage.length<1?el.$prevMessage:el.$nextMessage,messageId=el.$currentMessage.data("message-id");if($nextMessage.length===0){el.$notifications.remove()}else{el.$currentMessage.remove();$nextMessage.addClass("current");app.updateNavigation()}var data={action:"charitable_notification_dismiss",nonce:charitable_admin.nonce,id:messageId};$.post(charitable_admin.ajax_url,data,(function(res){if(!res.success){console.log(res)}})).fail((function(xhr,textStatus,e){console.log(xhr.responseText)}))},navNext:function(event){if(el.$nextButton.hasClass("disabled")){return}el.$currentMessage.removeClass("current");el.$nextMessage.addClass("current");app.updateNavigation()},navPrev:function(event){if(el.$prevButton.hasClass("disabled")){return}el.$currentMessage.removeClass("current");el.$prevMessage.addClass("current");app.updateNavigation()},updateNavigation:function(){el.$currentMessage=el.$notifications.find(".charitable-notifications-message.current");el.$nextMessage=el.$currentMessage.next(".charitable-notifications-message");el.$prevMessage=el.$currentMessage.prev(".charitable-notifications-message");if(el.$nextMessage.length===0){el.$nextButton.addClass("disabled")}else{el.$nextButton.removeClass("disabled")}if(el.$prevMessage.length===0){el.$prevButton.addClass("disabled")}else{el.$prevButton.removeClass("disabled")}}};return app}(document,window,jQuery);WPCharitableAdminNotifications.init();