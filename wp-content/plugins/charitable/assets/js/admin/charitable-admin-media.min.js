(function($){var file_frame;window.formfield="";$(document.body).on("click",".charitable-upload-button",(function(e){e.preventDefault();var $button=$(this);window.formfield=$button;if(file_frame){file_frame.open();return}file_frame=wp.media.frames.file_frame=wp.media({frame:"post",state:"insert",title:$button.data("uploader-title"),button:{text:$button.data("uploader-button-text")},library:{type:$button.data("uploader-library")},multiple:false});file_frame.on("menu:render:default",(function(view){var views={};view.unset("library-separator");view.unset("gallery");view.unset("featured-image");view.unset("embed");view.unset("playlist");view.unset("video-playlist");view.set(views)}));file_frame.on("insert",(function(){var selection=file_frame.state().get("selection");selection.each((function(attachment,index){attachment=attachment.toJSON();var id_field_name=$button.data("uploader-attachment-id-field-name"),src_field_name=$button.data("uploader-attachment-src-field-name"),display_field_id=$button.data("uploader-attachment-preview-field");if("undefined"!==typeof id_field_name){var attachment_id_field=$("[name='"+id_field_name+"']");attachment_id_field.val(attachment.id)}if("undefined"!==typeof src_field_name){var attachment_src_field=$('[name="'+src_field_name+'"]');attachment_src_field.val(attachment.url)}if("undefined"!==typeof display_field_id){var display_field=$("#"+display_field_id);display_field.html('<img src="'+attachment.url+'" alt="" style="max-width:100%;" />')}}))}));file_frame.open()}));var file_frame;window.formfield=""})(jQuery);