"use strict";var CharitableConnect=window.CharitableConnect||function(document,window,$){var el={$connectBtn:$("#charitable-settings-connect-btn"),$connectKey:$("#charitable-settings-upgrade-license-key")};var app={init:function(){$(app.ready)},ready:function(){app.events()},events:function(){app.connectBtnClick()},connectBtnClick:function(){if(!el.$connectBtn.data("pro-connect")||el.$connectBtn.data("pro-connect")===false){return}el.$connectBtn.on("click",(function(event){event.preventDefault();app.gotoUpgradeUrl()}))},proAlreadyInstalled:function(res){var buttons={confirm:{text:charitable_admin.plugin_activate_btn,btnClass:"btn-confirm",keys:["enter"],action:function(){window.location.reload()}}};return{title:charitable_admin.almost_done,content:res.data.message,icon:"fa fa-check-circle",type:"green",buttons:buttons}},gotoUpgradeUrl:function(event){var data={action:"charitable_connect_url",key:el.$connectKey.val(),nonce:charitable_admin.nonce};if(!el.$connectKey.val()){$.alert({title:charitable_admin.oops,icon:"fa fa-exclamation-circle",type:"orange",boxWidth:"800px",content:charitable_admin.please_enter_key,buttons:{confirm:{text:charitable_admin.ok,btnClass:"btn-confirm",keys:["enter"]}}});event.preventDefault();return false}$.post(charitable_admin.ajax_url,data).done((function(res){if(res.success){if(res.data.reload){$.alert(app.proAlreadyInstalled(res));return}window.location.href=res.data.url;return}if(res.data.show_manual_upgrade){$.alert({title:charitable_admin.oops,content:res.data.message,icon:"fa fa-exclamation-circle",type:"orange",boxWidth:"800px",buttons:{confirm:{text:charitable_admin.ok,btnClass:"btn-confirm",keys:["enter"]},url:{text:charitable_admin.manual_upgrade,btnClass:"btn-confirm",action:function(){window.open(res.data.url,"_blank")}}}})}else{$.alert({title:charitable_admin.oops,content:res.data.message,icon:"fa fa-exclamation-circle",type:"orange",boxWidth:"800px",buttons:{confirm:{text:charitable_admin.ok,btnClass:"btn-confirm",keys:["enter"]}}})}})).fail((function(xhr){app.failAlert(xhr)}))},failAlert:function(xhr){$.alert({title:charitable_admin.oops,content:charitable_admin.server_error+"<br>"+xhr.status+" "+xhr.statusText+" "+xhr.responseText,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:charitable_admin.ok,btnClass:"btn-confirm",keys:["enter"]}}})}};return app}(document,window,jQuery);CharitableConnect.init();